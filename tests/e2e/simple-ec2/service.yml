service: simple-ec2-test
owner: platform-team
runtime: none
complianceFramework: commercial

environments:
  dev:
    defaults:
      region: us-east-1

components:
  # Simple VPC for our EC2 instance
  - name: test-vpc
    type: vpc
    config:
      vpcCidr: "10.0.0.0/16"
      availabilityZones:
        - us-east-1a
        - us-east-1b
      enableNatGateway: false  # Keep it simple and cheap
      enableVpcFlowLogs: false # Keep it simple

  # Simple EC2 instance
  - name: test-ec2
    type: ec2-instance
    config:
      instanceType: t3.micro
      imageId: ami-0c02fb55956c7d316  # Amazon Linux 2
      keyName: ""  # No key pair needed for test
      userData: |
        #!/bin/bash
        yum update -y
        echo "Hello from simple EC2 test" > /tmp/test-output.txt
    binds:
      - to: test-vpc
        capability: network:vpc
        access: use
